<!DOCTYPE html>
<html lang="zh-CN">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Day11_madplay&amp;makefile - 空白Koobai</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="/suju/ios.json">
  <link rel="icon" href="https://img.koobai.com/koobai.png">
  <link href="/index.xml" title="空白Koobai" type="application/rss+xml">
  <link rel="canonical" href="http://localhost:1313/day11_madplaymakefile/" />

  
  
  <link rel="stylesheet" href="/css/style.css">
  

  
    
    <meta property="og:title" content="Day11_madplay&amp;makefile"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://localhost:1313/day11_madplaymakefile/"/>
    
    
  
</head>



<body class='page page-blog-single'>
  <div id="menu-main-mobile" class="menu-main-mobile">
    <ul class="menu">
        
        
            
                <li >
                    <a href="http://localhost:1313/">首页</a>
                </li>
            
        
            
                <li >
                    <a href="http://localhost:1313/posts/">博文</a>
                </li>
            
        
            
                <li >
                    <a href="https://sport.koobai.com/">骑行</a>
                </li>
            
        
            
                <li >
                    <a href="http://localhost:1313/apps/">软件</a>
                </li>
            
        
            
                <li >
                    <a href="http://localhost:1313/movies/">观影</a>
                </li>
            
        
            
                <li >
                    <a href="https://qiszy.taobao.com">好物</a>
                </li>
            
        
    </ul>
</div>
  <div id="wrapper" class="wrapper">
    <div class="header">

<div id="toggle-menu-main-mobile" class="hamburger-trigger">
  <button class="hamburger">Menu</button>
</div>
<div class="new-heard-menu">




<div class="header-menu">
  <a href="/" >首页</a>
</div>



<div class="header-menu">
  <a href="/posts/" >博文</a>
</div>



<div class="header-menu">
  <a href="https://sport.koobai.com/" >骑行</a>
</div>



<div class="header-menu">
  <a href="/apps/" >软件</a>
</div>



<div class="header-menu">
  <a href="/movies/" >观影</a>
</div>



<div class="header-menu">
  <a href="https://qiszy.taobao.com" target="_blank">好物</a>
</div>

</div>
  <div class="heard-right"> 
    <div class="about-koobai"><a href="/about/"><img src="https://img.koobai.com/koobai.webp" alt="koobai" title="我" data-umami-event="me"></a></div>
    <a href="https://github.com/koobai/blog" title="Github" target="_blank" class="githuab"><svg aria-hidden="true" viewBox="0 0 16 16" version="1.1" data-view-component="true" ><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path>
    </svg></a>    
    <a href="https://space.bilibili.com/2084095738" target="_blank" title="当UP主的一天"><svg width="20" height="20" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="zhuzhan-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.73252 2.67094C3.33229 2.28484 3.33229 1.64373 3.73252 1.25764C4.11291 0.890684 4.71552 0.890684 5.09591 1.25764L7.21723 3.30403C7.27749 3.36218 7.32869 3.4261 7.37081 3.49407H10.5789C10.6211 3.4261 10.6723 3.36218 10.7325 3.30403L12.8538 1.25764C13.2342 0.890684 13.8368 0.890684 14.2172 1.25764C14.6175 1.64373 14.6175 2.28484 14.2172 2.67094L13.364 3.49407H14C16.2091 3.49407 18 5.28493 18 7.49407V12.9996C18 15.2087 16.2091 16.9996 14 16.9996H4C1.79086 16.9996 0 15.2087 0 12.9996V7.49406C0 5.28492 1.79086 3.49407 4 3.49407H4.58579L3.73252 2.67094ZM4 5.42343C2.89543 5.42343 2 6.31886 2 7.42343V13.0702C2 14.1748 2.89543 15.0702 4 15.0702H14C15.1046 15.0702 16 14.1748 16 13.0702V7.42343C16 6.31886 15.1046 5.42343 14 5.42343H4ZM5 9.31747C5 8.76519 5.44772 8.31747 6 8.31747C6.55228 8.31747 7 8.76519 7 9.31747V10.2115C7 10.7638 6.55228 11.2115 6 11.2115C5.44772 11.2115 5 10.7638 5 10.2115V9.31747ZM12 8.31747C11.4477 8.31747 11 8.76519 11 9.31747V10.2115C11 10.7638 11.4477 11.2115 12 11.2115C12.5523 11.2115 13 10.7638 13 10.2115V9.31747C13 8.76519 12.5523 8.31747 12 8.31747Z"></path></svg></a>
</div>

</div>

<script src="/js/moment.min.js?v=2.29.4"></script>
<script src="/js/moment.twitter.min.js"></script>
<script>
function formatDate(param) {
if(typeof param === 'number') {
     param = new Date(param * 1000).toISOString();
  }
return moment(Date.parse(param)).twitterLong().replace(/\s\d{2}:\d{2}/, '');
}
</script>
     
<div class="single-nrong">
<div class="single-zw">
    <div class="article_details">
      <div class="article_details_title">Day11_madplay&amp;makefile</div>
      
    </div>
    <div class="content_zhengwen">
    <div class="content">
      <p>[TOC]</p>
<h1 id="音乐播放命令-madplay">音乐播放命令-madplay</h1>
<h2 id="1使用格式madplay--mnt"><strong>1.使用格式：madplay  /mnt/&hellip;..mp3</strong></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">madplay命令使用详细参数：
</span></span><span class="line"><span class="cl">-v 获取音乐播放时间
</span></span><span class="line"><span class="cl">-q 不存在任何打印,但现实警告
</span></span><span class="line"><span class="cl">-Q 不存在任何打印
</span></span><span class="line"><span class="cl">–downsample 只采用一半数据
</span></span><span class="line"><span class="cl">-i 忽略CRC校验错误
</span></span><span class="line"><span class="cl">-o PATH/xx.wav 可以用来转码，将mp3转为wav，也可以是其他格式。
</span></span><span class="line"><span class="cl">-a 开启衰减音量 ，增加音量，衰减系统为-175~+18 （当然通过键盘±也可以调整音量）
</span></span><span class="line"><span class="cl">-A 同-a
</span></span><span class="line"><span class="cl">-1 -2 -m -S 分别指左声道，右声道，双声道，立体声
</span></span><span class="line"><span class="cl">-s 用于seek播放 0:1:10:20 ，seek到1小时，10分钟，20秒时开始播放
</span></span><span class="line"><span class="cl">-t 用于播放时间设置（定时停止） 0:1:10:20 ，播放到1小时，10分钟，20秒时就停止
</span></span><span class="line"><span class="cl">-z 用于随机播放列表歌曲
</span></span><span class="line"><span class="cl">-r, 用于循环播放列表歌曲
</span></span><span class="line"><span class="cl">-r, --repeat[=MAX] 循环播放无限次或Max次
</span></span></code></pre></div><h2 id="2以下的可以直接在控制端执行"><strong>2.以下的可以直接在控制端执行</strong></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">播放某首歌一次：
</span></span><span class="line"><span class="cl">./madplay music/1.mp3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某首歌（单曲循环）：
</span></span><span class="line"><span class="cl">./madplay music/1.mp3 -r
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某目录文件下的MP3歌曲一次：
</span></span><span class="line"><span class="cl">./madplay music/*.mp3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某目录文件下的MP3歌曲（列表循环播放）：
</span></span><span class="line"><span class="cl">./madplay music/*.mp3 -r
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某目录文件下的MP3歌曲（列表随机播放）：
</span></span><span class="line"><span class="cl">./madplay music/*.mp3 -z
</span></span></code></pre></div><h2 id="3以下只能程序控制"><strong>3.以下只能程序控制:</strong></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">system(&#34;madplay music/*.mp3 &amp;&#34;);						//利用system函数调用madplay播放器播放music目录下所有的.mp3音乐
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;madplay music/*.mp3 -r &amp;&#34;);						//列表歌曲循环播放
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;killall -STOP madplay &amp;&#34;);						//利用system函数调用killall命令暂停播放音乐
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;killall -CONT madplay &amp;&#34;);						//利用system函数调用killall命令恢复播放音乐
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;killall -9 madplay&#34;);							//利用system函数调用killall命令将madplay终止关闭
</span></span></code></pre></div><h2 id="4不能识别的字符">4.不能识别的字符</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">在使用中,发现:madplay只能识别:中文,英文,数字。
</span></span><span class="line"><span class="cl">它甚至不能识别空格。。。
</span></span></code></pre></div><h1 id="makefile的基础使用">Makefile的基础使用</h1>
<blockquote>
<p>MAKEFILE是make的配置文件</p></blockquote>
<p>什么是make呢？简而言之就是脚本，用来编译文件的。</p>
<p>make通过Makefile中编写的编译规则来实现的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">make具有时间戳功能，（什么是时间戳）每次make的时候，会去比较目标文件.o和.c文件谁更早存在。如果源文件比目标文件更新，则源文件会重新编译。否则就不会编译。
</span></span></code></pre></div><h2 id="1makefile怎么写">1.Makefile怎么写</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Makefile的三部分：
</span></span><span class="line"><span class="cl">    目标名，通常要生成的目标文件
</span></span><span class="line"><span class="cl">    依赖文件，就是生成该文件需要哪些源文件（中间文件）生成。（.o就是中间文件）
</span></span><span class="line"><span class="cl">    编译规则，指令。如何将源文件（中间文件）编译成目标文件。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">比如：
</span></span><span class="line"><span class="cl">	将main.c a.c编译成main：gcc 1.o 2.o -o main。这句命令就代表着：目标文件，main，依赖于依赖文件1.o和2.o，编译规则是gcc。
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">makefile文件中应该写：
</span></span><span class="line"><span class="cl">    main:main.o a.o
</span></span><span class="line"><span class="cl">        gcc main.o a.o -o main
</span></span><span class="line"><span class="cl">    main.o:main.c 
</span></span><span class="line"><span class="cl">        gcc -c main.c -o main.o
</span></span><span class="line"><span class="cl">    a.o:a.c
</span></span><span class="line"><span class="cl">        gcc -c a.c -o a.o
</span></span></code></pre></div><h2 id="2makefile提供智能化">2.Makefile提供“智能化”</h2>
<h3 id="amakefile中变量">a.Makefile中变量</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">定义变量
</span></span><span class="line"><span class="cl">	符合标识符命名规则即可 
</span></span><span class="line"><span class="cl">	顶格写，没有类型的概念
</span></span><span class="line"><span class="cl">	因为Makefile中变量当作字符串进行处理
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">引用变量的值
</span></span><span class="line"><span class="cl">	$(变量名)
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">变量的赋值
</span></span><span class="line"><span class="cl">	:=就地赋值，直接赋值
</span></span><span class="line"><span class="cl">	比如：
</span></span><span class="line"><span class="cl">		ABC:=3 将3赋值给ABC 
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	=递归赋值
</span></span><span class="line"><span class="cl">	B=$(A)
</span></span><span class="line"><span class="cl">	A:=123
</span></span><span class="line"><span class="cl">	===&gt;B的值就会被递归赋值为123
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    +=追加赋值
</span></span><span class="line"><span class="cl">    A:=1
</span></span><span class="line"><span class="cl">    A+=2
</span></span><span class="line"><span class="cl">    ====&gt;A的值12
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    ?=条件赋值
</span></span><span class="line"><span class="cl">    如果变量未定义或者未被赋值才会赋值
</span></span><span class="line"><span class="cl">    A:=1
</span></span><span class="line"><span class="cl">    A?=3
</span></span><span class="line"><span class="cl">    ===&gt;A的值还是1
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">自动变量
</span></span><span class="line"><span class="cl"> 	Makefile自带变量，不需要定义，因为Makefile已经帮你定义号了
</span></span><span class="line"><span class="cl"> 	$@ 表示目标文件的完整名字（TARGET）
</span></span><span class="line"><span class="cl"> 	$+ 所有的依赖的文件名
</span></span><span class="line"><span class="cl"> 	$&lt; 第一个依赖文件名
</span></span><span class="line"><span class="cl"> 	$? 所有时间戳比目标文件晚的文件名，并且以空格隔开
</span></span><span class="line"><span class="cl"> 	$^ 所有不重复的依赖文件
</span></span></code></pre></div><p>Makefile例子：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nv">TARGET</span><span class="o">:=</span>main <span class="c1">#可执行文件 </span>
</span></span><span class="line"><span class="cl"><span class="nv">CC</span><span class="o">:=</span>gcc  <span class="c1">#编译器 </span>
</span></span><span class="line"><span class="cl"><span class="nf">main</span><span class="o">:</span>1.<span class="n">o</span> 2.<span class="n">o</span> 
</span></span><span class="line"><span class="cl">	gcc 1.o 2.o -o main
</span></span><span class="line"><span class="cl"><span class="nf">$(TARGET)</span><span class="o">:</span>1.<span class="n">o</span> 2.<span class="n">o</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> $^ -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">1.o</span><span class="o">:</span>1.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	gcc -c 1.c -o 1.o
</span></span><span class="line"><span class="cl"><span class="nf">1.o</span><span class="o">:</span>1.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">2.o</span><span class="o">:</span>2.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	gcc -c 2.c -o 2.o
</span></span><span class="line"><span class="cl"><span class="nf">2.o</span><span class="o">:</span>2.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">%.o</span><span class="o">:</span>%.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl"><span class="c">#%.o:%.c 同名.o:同名.c
</span></span></span><span class="line"><span class="cl"><span class="c">#并且生成的规则是一样的
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">上面的这个地方
</span></span><span class="line"><span class="cl">	$(TARGET):1.o 2.o
</span></span><span class="line"><span class="cl">	$(CC) $^ -o $@
</span></span><span class="line"><span class="cl">	需要指定2.o 2.o....
</span></span><span class="line"><span class="cl">		   main.o bmp.o touch.o gy39.o lcd.o ....
</span></span><span class="line"><span class="cl">	当你的工程多一个.c或者少一个.c。你需要手动修改Makefile中的规则，很麻烦？
</span></span><span class="line"><span class="cl">	有没有办法让make自动去某个目录下面搜索所有的.c文件呢？
</span></span><span class="line"><span class="cl">	有，通过make的内置函数来实现
</span></span></code></pre></div><h3 id="bmakefile的函数">b.Makefile的函数</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="err">Makefile允许使用并调用函数</span>
</span></span><span class="line"><span class="cl">	<span class="err">格式如下：</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>函数名 函数参数列表<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">Makefile运行调用shell命令或脚本</span> 
</span></span><span class="line"><span class="cl">	<span class="err">格式如下：</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span><span class="nv">shell</span>命令或脚本 参数<span class="k">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	rm *.o 
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">wildcard</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	文件名展开函数，展开称为一列符合其参数描述的文件名，展开的文件名以空格隔开
</span></span><span class="line"><span class="cl">	1.c 2.c 3.c ...
</span></span><span class="line"><span class="cl">	wildcard只带一个参数，指定文件名的通配方式
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	CSRCS:<span class="o">=</span><span class="k">$(</span>wildcard *.c<span class="k">)</span><span class="c1">#展开所有当前目录下的.c文件名赋值给CSRCS</span>
</span></span><span class="line"><span class="cl">	<span class="nv">CSRCS</span><span class="o">+=</span><span class="k">$(</span>wildcard mp3/*.c<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">patsubst</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	模式字符串替换函数  
</span></span><span class="line"><span class="cl">	“子模式替换函数”
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>patsubst &lt;from&gt;,&lt;to&gt;,&lt;text&gt;<span class="k">)</span>
</span></span><span class="line"><span class="cl">	把原始字符&lt;text&gt;中的&lt;from&gt;替换成&lt;to&gt;
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>patsubst %.c,%.o,<span class="s2">&#34;1.c 2.c 3.c&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">===</span>&gt;<span class="s2">&#34;1.o 2.o 3.o&#34;</span>
</span></span></code></pre></div><h3 id="c万能版makefile">c.万能版Makefile</h3>
<p>这是我自己的makefile，当个例子</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nv">TARGET</span><span class="o">:=</span> mp  
</span></span><span class="line"><span class="cl"><span class="c">#生成的可执行文件，即目标文件。
</span></span></span><span class="line"><span class="cl"><span class="c">#可以更改。
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">SOURCES</span><span class="o">:=</span>  
</span></span><span class="line"><span class="cl"><span class="c">#指定所有源文件 .c cpp。
</span></span></span><span class="line"><span class="cl"><span class="c">#不要更改！!!
</span></span></span><span class="line"><span class="cl"><span class="c">#不要将你的SOURCE的路径写进去，不然make clean命令会删掉你的SOURCE文件，找都找不回！！！
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">OBJS</span><span class="o">:=</span>  
</span></span><span class="line"><span class="cl"><span class="c">#指定所有的中间文件 .o 。
</span></span></span><span class="line"><span class="cl"><span class="c">#不用更改
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">CC</span><span class="o">:=</span>arm-linux-gcc 
</span></span><span class="line"><span class="cl"><span class="c">#指定编译器
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">INCS</span><span class="o">:=</span>-I  ./INCS
</span></span><span class="line"><span class="cl"><span class="c">#指定头文件的搜索路径
</span></span></span><span class="line"><span class="cl"><span class="c">#可以更改,&#34;./INCS&#34;是我自己的头文件存储的地方
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">LIBS</span><span class="o">:=</span>-L . 
</span></span><span class="line"><span class="cl"><span class="c">#指定库文件搜索文件  
</span></span></span><span class="line"><span class="cl"><span class="c">#不用更改
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">LIBNAME</span><span class="o">:=</span> -pthread 
</span></span><span class="line"><span class="cl"><span class="c">#指定库名字  -pthread 
</span></span></span><span class="line"><span class="cl"><span class="c">#可以更改
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">SOURCES</span><span class="o">+=</span><span class="k">$(</span>wildcard ./SOURCE/*.c<span class="k">)</span> 
</span></span><span class="line"><span class="cl"><span class="c">#展开当前目录下SOURCE中所有的.c文件 
</span></span></span><span class="line"><span class="cl"><span class="c">#把文件名赋值给#SOURCES
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">OBJS</span><span class="o">+=</span><span class="k">$(</span>patsubst %.c,%.o,<span class="k">$(</span>SOURCES<span class="k">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">$(TARGET)</span><span class="o">:</span><span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> $^ -o <span class="nv">$@</span> <span class="k">$(</span>INCS<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span> <span class="k">$(</span>LIBNAME<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="c">#指定可执行文件(目标文件)的编译规则
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nf">%.o</span><span class="o">:</span>%.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c  $&lt; -o <span class="nv">$@</span> <span class="k">$(</span>INCS<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="c">#制定中间文件的编译规则
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	rm  -rf <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJS<span class="k">)</span> 
</span></span><span class="line"><span class="cl"><span class="c">#递归删除 删除文件夹下面的可执行文件和中间文件
</span></span></span></code></pre></div><p><strong>如果是第一次用makefile,建议先备份一份测试以下.</strong></p>

    </div>
    <div class="single-biaoq">
 <div class="page-time">更新于 
  <script>
    document.write(formatDate( 1759488826 )); 
  </script>
 </div>
 <div class="single-tag">
     
          
     <div class="single-tag-c">#<a href="/tags/default_tag/">Default_tag</a></div>
          
          
 </div>
  </div> 
 </div>
 
 <div class="archives_nrong" >
  
    <div class="archives_one">
      <div>
        <div class="archive-title"><a href="/day12_dirent/">Day12_dirent</a></div>
        <div class="archive-time">
          <script>
            document.write(formatDate( 1759488826 )); 
          </script>
        </div>
        </div>
        <div class="archive-img">
        <a href="/day12_dirent/"><img loading="lazy" decoding="async" src="/" /></a>          
        </div>
    </div>
  
  
    <div class="archives_one">
      <div>
        <div class="archive-title"><a href="/day10_gy39/">Day10_GY39</a></div>
        <div class="archive-time">
          <script>
            document.write(formatDate( 1759488826 )); 
          </script>
        </div>
        </div>
        <div class="archive-img">
        <a href="/day10_gy39/"><img loading="lazy" decoding="async" src="/" /></a>          
        </div>
    </div>
  
</div>
      
      <div id="MoreComments" onclick="loadComments()">评论一下 ...</div>
      <div class="article-comments" id="articlecomments" style="display: none;"><link href="https://img.koobai.com/Artalk.css" rel="stylesheet">
<script src="https://img.koobai.com/Artalk.js"></script>


<div id="Comments"></div>

<script>
  Artalk.init({
    el:        '#Comments',
    pageKey:   'http:\/\/localhost:1313\/day11_madplaymakefile\/',
    pageTitle: 'Day11_madplay\u0026makefile',
    server:    'https:\/\/c.koobai.com',
    site:      'Koobai 空白生活',
    
  })
</script></div> 
</div>

<div>
    <div class="paragraph-dh">
     <nav id="TableOfContents">
  <ul>
    <li><a href="#1使用格式madplay--mnt"><strong>1.使用格式：madplay  /mnt/&hellip;..mp3</strong></a></li>
    <li><a href="#2以下的可以直接在控制端执行"><strong>2.以下的可以直接在控制端执行</strong></a></li>
    <li><a href="#3以下只能程序控制"><strong>3.以下只能程序控制:</strong></a></li>
    <li><a href="#4不能识别的字符">4.不能识别的字符</a></li>
  </ul>

  <ul>
    <li><a href="#1makefile怎么写">1.Makefile怎么写</a></li>
    <li><a href="#2makefile提供智能化">2.Makefile提供“智能化”</a>
      <ul>
        <li><a href="#amakefile中变量">a.Makefile中变量</a></li>
        <li><a href="#bmakefile的函数">b.Makefile的函数</a></li>
        <li><a href="#c万能版makefile">c.万能版Makefile</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

</div>
<script src="/js/single.js"></script>    

  </div>
  <div class="footer-background">
<div class="footer">
        <div class="footer-info">&copy; 2025 <a href="/">空白Koobai</a>. 
        由 <a href="https://gohugo.io/" target="_blank"> Hugo </a> 提供强力驱动,<span class="youpaiyun"><a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank">又拍云</a>提供存储/加速</span>. 
        <a href="https://beian.miit.gov.cn/" target="_blank">浙ICP备16011784号-1</a> <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011302000343">浙公网安备 33011302000343 号</a>
      </div>
      <div class="footer-rss">
      <a href="https://memos.koobai.com/u/1/rss.xml" target="_blank">唠叨 RSS</a> / 
      <a href="https://koobai.com/index.xml" target="_blank">博文 RSS</a>
      </div>
    </div>
  </div>
 
 <script src="/js/view-image.min.js"></script>
  
<div class="gotop_hide">
  <div class="gotop" onclick="smoothScrollTop()" id="gotop"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="m1875 1037l-787-787v1798H960V250l-787 787l-90-90L1024 6l941 941z"/></svg></div>
</div>
  

  

  
  <script type="text/javascript" src="/js/bundle.js"></script>
  

  
   
</body>
</html>
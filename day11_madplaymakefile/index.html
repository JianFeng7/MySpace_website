<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="[TOC]\n音乐播放命令-madplay 1.使用格式：madplay /mnt/&hellip;..mp3 madplay命令使用详细参数： -v 获取音乐播放时间 -q 不存在任何打印,但现实警告 -Q 不存在任何打印 –downsample 只采用一半数据 -i 忽略CRC校验错误 -o PATH/xx.wav 可以用来转码，将mp3转为wav，也可以是其他格式。 -a 开启衰减音量 ，增加音量，衰减系统为-175~+18 （当然通过键盘±也可以调整音量） -A 同-a -1 -2 -m -S 分别指左声道，右声道，双声道，立体声 -s 用于seek播放 0:1:10:20 ，seek到1小时，10分钟，20秒时开始播放 -t 用于播放时间设置（定时停止） 0:1:10:20 ，播放到1小时，10分钟，20秒时就停止 -z 用于随机播放列表歌曲 -r, 用于循环播放列表歌曲 -r, --repeat[=MAX] 循环播放无限次或Max次 2.以下的可以直接在控制端执行 播放某首歌一次： ./madplay music/1.mp3 播放某首歌（单曲循环）： ./madplay music/1.mp3 -r 播放某目录文件下的MP3歌曲一次： ./madplay music/*.mp3 播放某目录文件下的MP3歌曲（列表循环播放）： ./madplay music/*.mp3 -r 播放某目录文件下的MP3歌曲（列表随机播放）： ./madplay music/*.mp3 -z 3.以下只能程序控制: system(&#34;madplay music/*.mp3 &amp;&#34;);\t//利用system函数调用madplay播放器播放music目录下所有的.mp3音乐 system(&#34;madplay music/*.mp3 -r &amp;&#34;);\t//列表歌曲循环播放 system(&#34;killall -STOP madplay &amp;&#34;);\t//利用system函数调用killall命令暂停播放音乐 system(&#34;killall -CONT madplay &amp;&#34;);\t//利用system函数调用killall命令恢复播放音乐 system(&#34;killall -9 madplay&#34;);\t//利用system函数调用killall命令将madplay终止关闭 4.不能识别的字符 在使用中,发现:madplay只能识别:中文,英文,数字。 它甚至不能识别空格。。。 Makefile的基础使用 MAKEFILE是make的配置文件\n">
<title>Day11_madplay&amp;makefile</title>

<link rel='canonical' href='http://localhost:1313/day11_madplaymakefile/'>

<link rel="stylesheet" href="/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css"><meta property='og:title' content="Day11_madplay&makefile">
<meta property='og:description' content="[TOC]\n音乐播放命令-madplay 1.使用格式：madplay /mnt/&hellip;..mp3 madplay命令使用详细参数： -v 获取音乐播放时间 -q 不存在任何打印,但现实警告 -Q 不存在任何打印 –downsample 只采用一半数据 -i 忽略CRC校验错误 -o PATH/xx.wav 可以用来转码，将mp3转为wav，也可以是其他格式。 -a 开启衰减音量 ，增加音量，衰减系统为-175~+18 （当然通过键盘±也可以调整音量） -A 同-a -1 -2 -m -S 分别指左声道，右声道，双声道，立体声 -s 用于seek播放 0:1:10:20 ，seek到1小时，10分钟，20秒时开始播放 -t 用于播放时间设置（定时停止） 0:1:10:20 ，播放到1小时，10分钟，20秒时就停止 -z 用于随机播放列表歌曲 -r, 用于循环播放列表歌曲 -r, --repeat[=MAX] 循环播放无限次或Max次 2.以下的可以直接在控制端执行 播放某首歌一次： ./madplay music/1.mp3 播放某首歌（单曲循环）： ./madplay music/1.mp3 -r 播放某目录文件下的MP3歌曲一次： ./madplay music/*.mp3 播放某目录文件下的MP3歌曲（列表循环播放）： ./madplay music/*.mp3 -r 播放某目录文件下的MP3歌曲（列表随机播放）： ./madplay music/*.mp3 -z 3.以下只能程序控制: system(&#34;madplay music/*.mp3 &amp;&#34;);\t//利用system函数调用madplay播放器播放music目录下所有的.mp3音乐 system(&#34;madplay music/*.mp3 -r &amp;&#34;);\t//列表歌曲循环播放 system(&#34;killall -STOP madplay &amp;&#34;);\t//利用system函数调用killall命令暂停播放音乐 system(&#34;killall -CONT madplay &amp;&#34;);\t//利用system函数调用killall命令恢复播放音乐 system(&#34;killall -9 madplay&#34;);\t//利用system函数调用killall命令将madplay终止关闭 4.不能识别的字符 在使用中,发现:madplay只能识别:中文,英文,数字。 它甚至不能识别空格。。。 Makefile的基础使用 MAKEFILE是make的配置文件\n">
<meta property='og:url' content='http://localhost:1313/day11_madplaymakefile/'>
<meta property='og:site_name' content='MySpace'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='default_tag' /><meta property='article:published_time' content='2025-10-03T18:53:46&#43;08:00'/><meta property='article:modified_time' content='2025-10-03T18:53:46&#43;08:00'/>
<meta name="twitter:title" content="Day11_madplay&makefile">
<meta name="twitter:description" content="[TOC]\n音乐播放命令-madplay 1.使用格式：madplay /mnt/&hellip;..mp3 madplay命令使用详细参数： -v 获取音乐播放时间 -q 不存在任何打印,但现实警告 -Q 不存在任何打印 –downsample 只采用一半数据 -i 忽略CRC校验错误 -o PATH/xx.wav 可以用来转码，将mp3转为wav，也可以是其他格式。 -a 开启衰减音量 ，增加音量，衰减系统为-175~+18 （当然通过键盘±也可以调整音量） -A 同-a -1 -2 -m -S 分别指左声道，右声道，双声道，立体声 -s 用于seek播放 0:1:10:20 ，seek到1小时，10分钟，20秒时开始播放 -t 用于播放时间设置（定时停止） 0:1:10:20 ，播放到1小时，10分钟，20秒时就停止 -z 用于随机播放列表歌曲 -r, 用于循环播放列表歌曲 -r, --repeat[=MAX] 循环播放无限次或Max次 2.以下的可以直接在控制端执行 播放某首歌一次： ./madplay music/1.mp3 播放某首歌（单曲循环）： ./madplay music/1.mp3 -r 播放某目录文件下的MP3歌曲一次： ./madplay music/*.mp3 播放某目录文件下的MP3歌曲（列表循环播放）： ./madplay music/*.mp3 -r 播放某目录文件下的MP3歌曲（列表随机播放）： ./madplay music/*.mp3 -z 3.以下只能程序控制: system(&#34;madplay music/*.mp3 &amp;&#34;);\t//利用system函数调用madplay播放器播放music目录下所有的.mp3音乐 system(&#34;madplay music/*.mp3 -r &amp;&#34;);\t//列表歌曲循环播放 system(&#34;killall -STOP madplay &amp;&#34;);\t//利用system函数调用killall命令暂停播放音乐 system(&#34;killall -CONT madplay &amp;&#34;);\t//利用system函数调用killall命令恢复播放音乐 system(&#34;killall -9 madplay&#34;);\t//利用system函数调用killall命令将madplay终止关闭 4.不能识别的字符 在使用中,发现:madplay只能识别:中文,英文,数字。 它甚至不能识别空格。。。 Makefile的基础使用 MAKEFILE是make的配置文件\n">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_f509edb42ecc0ebd.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">MySpace</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                <span>首页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/posts/' >
                
                
                
                <span>博文</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://sport.koobai.com/' >
                
                
                
                <span>骑行</span>
            </a>
        </li>
        
        
        <li >
            <a href='/apps/' >
                
                
                
                <span>软件</span>
            </a>
        </li>
        
        
        <li >
            <a href='/movies/' >
                
                
                
                <span>观影</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://qiszy.taobao.com' >
                
                
                
                <span>好物</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    

            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/day11_madplaymakefile/">Day11_madplay&amp;makefile</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 03, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    5 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>[TOC]</p>
<h1 id="音乐播放命令-madplay">音乐播放命令-madplay
</h1><h2 id="1使用格式madplay--mnt"><strong>1.使用格式：madplay  /mnt/&hellip;..mp3</strong>
</h2><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">madplay命令使用详细参数：
</span></span><span class="line"><span class="cl">-v 获取音乐播放时间
</span></span><span class="line"><span class="cl">-q 不存在任何打印,但现实警告
</span></span><span class="line"><span class="cl">-Q 不存在任何打印
</span></span><span class="line"><span class="cl">–downsample 只采用一半数据
</span></span><span class="line"><span class="cl">-i 忽略CRC校验错误
</span></span><span class="line"><span class="cl">-o PATH/xx.wav 可以用来转码，将mp3转为wav，也可以是其他格式。
</span></span><span class="line"><span class="cl">-a 开启衰减音量 ，增加音量，衰减系统为-175~+18 （当然通过键盘±也可以调整音量）
</span></span><span class="line"><span class="cl">-A 同-a
</span></span><span class="line"><span class="cl">-1 -2 -m -S 分别指左声道，右声道，双声道，立体声
</span></span><span class="line"><span class="cl">-s 用于seek播放 0:1:10:20 ，seek到1小时，10分钟，20秒时开始播放
</span></span><span class="line"><span class="cl">-t 用于播放时间设置（定时停止） 0:1:10:20 ，播放到1小时，10分钟，20秒时就停止
</span></span><span class="line"><span class="cl">-z 用于随机播放列表歌曲
</span></span><span class="line"><span class="cl">-r, 用于循环播放列表歌曲
</span></span><span class="line"><span class="cl">-r, --repeat[=MAX] 循环播放无限次或Max次
</span></span></code></pre></div><h2 id="2以下的可以直接在控制端执行"><strong>2.以下的可以直接在控制端执行</strong>
</h2><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">播放某首歌一次：
</span></span><span class="line"><span class="cl">./madplay music/1.mp3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某首歌（单曲循环）：
</span></span><span class="line"><span class="cl">./madplay music/1.mp3 -r
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某目录文件下的MP3歌曲一次：
</span></span><span class="line"><span class="cl">./madplay music/*.mp3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某目录文件下的MP3歌曲（列表循环播放）：
</span></span><span class="line"><span class="cl">./madplay music/*.mp3 -r
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">播放某目录文件下的MP3歌曲（列表随机播放）：
</span></span><span class="line"><span class="cl">./madplay music/*.mp3 -z
</span></span></code></pre></div><h2 id="3以下只能程序控制"><strong>3.以下只能程序控制:</strong>
</h2><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">system(&#34;madplay music/*.mp3 &amp;&#34;);						//利用system函数调用madplay播放器播放music目录下所有的.mp3音乐
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;madplay music/*.mp3 -r &amp;&#34;);						//列表歌曲循环播放
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;killall -STOP madplay &amp;&#34;);						//利用system函数调用killall命令暂停播放音乐
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;killall -CONT madplay &amp;&#34;);						//利用system函数调用killall命令恢复播放音乐
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">system(&#34;killall -9 madplay&#34;);							//利用system函数调用killall命令将madplay终止关闭
</span></span></code></pre></div><h2 id="4不能识别的字符">4.不能识别的字符
</h2><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">在使用中,发现:madplay只能识别:中文,英文,数字。
</span></span><span class="line"><span class="cl">它甚至不能识别空格。。。
</span></span></code></pre></div><h1 id="makefile的基础使用">Makefile的基础使用
</h1><blockquote>
<p>MAKEFILE是make的配置文件</p></blockquote>
<p>什么是make呢？简而言之就是脚本，用来编译文件的。</p>
<p>make通过Makefile中编写的编译规则来实现的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">make具有时间戳功能，（什么是时间戳）每次make的时候，会去比较目标文件.o和.c文件谁更早存在。如果源文件比目标文件更新，则源文件会重新编译。否则就不会编译。
</span></span></code></pre></div><h2 id="1makefile怎么写">1.Makefile怎么写
</h2><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Makefile的三部分：
</span></span><span class="line"><span class="cl">    目标名，通常要生成的目标文件
</span></span><span class="line"><span class="cl">    依赖文件，就是生成该文件需要哪些源文件（中间文件）生成。（.o就是中间文件）
</span></span><span class="line"><span class="cl">    编译规则，指令。如何将源文件（中间文件）编译成目标文件。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">比如：
</span></span><span class="line"><span class="cl">	将main.c a.c编译成main：gcc 1.o 2.o -o main。这句命令就代表着：目标文件，main，依赖于依赖文件1.o和2.o，编译规则是gcc。
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">makefile文件中应该写：
</span></span><span class="line"><span class="cl">    main:main.o a.o
</span></span><span class="line"><span class="cl">        gcc main.o a.o -o main
</span></span><span class="line"><span class="cl">    main.o:main.c 
</span></span><span class="line"><span class="cl">        gcc -c main.c -o main.o
</span></span><span class="line"><span class="cl">    a.o:a.c
</span></span><span class="line"><span class="cl">        gcc -c a.c -o a.o
</span></span></code></pre></div><h2 id="2makefile提供智能化">2.Makefile提供“智能化”
</h2><h3 id="amakefile中变量">a.Makefile中变量
</h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">定义变量
</span></span><span class="line"><span class="cl">	符合标识符命名规则即可 
</span></span><span class="line"><span class="cl">	顶格写，没有类型的概念
</span></span><span class="line"><span class="cl">	因为Makefile中变量当作字符串进行处理
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">引用变量的值
</span></span><span class="line"><span class="cl">	$(变量名)
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">变量的赋值
</span></span><span class="line"><span class="cl">	:=就地赋值，直接赋值
</span></span><span class="line"><span class="cl">	比如：
</span></span><span class="line"><span class="cl">		ABC:=3 将3赋值给ABC 
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	=递归赋值
</span></span><span class="line"><span class="cl">	B=$(A)
</span></span><span class="line"><span class="cl">	A:=123
</span></span><span class="line"><span class="cl">	===&gt;B的值就会被递归赋值为123
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    +=追加赋值
</span></span><span class="line"><span class="cl">    A:=1
</span></span><span class="line"><span class="cl">    A+=2
</span></span><span class="line"><span class="cl">    ====&gt;A的值12
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    ?=条件赋值
</span></span><span class="line"><span class="cl">    如果变量未定义或者未被赋值才会赋值
</span></span><span class="line"><span class="cl">    A:=1
</span></span><span class="line"><span class="cl">    A?=3
</span></span><span class="line"><span class="cl">    ===&gt;A的值还是1
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">自动变量
</span></span><span class="line"><span class="cl"> 	Makefile自带变量，不需要定义，因为Makefile已经帮你定义号了
</span></span><span class="line"><span class="cl"> 	$@ 表示目标文件的完整名字（TARGET）
</span></span><span class="line"><span class="cl"> 	$+ 所有的依赖的文件名
</span></span><span class="line"><span class="cl"> 	$&lt; 第一个依赖文件名
</span></span><span class="line"><span class="cl"> 	$? 所有时间戳比目标文件晚的文件名，并且以空格隔开
</span></span><span class="line"><span class="cl"> 	$^ 所有不重复的依赖文件
</span></span></code></pre></div><p>Makefile例子：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nv">TARGET</span><span class="o">:=</span>main <span class="c1">#可执行文件 </span>
</span></span><span class="line"><span class="cl"><span class="nv">CC</span><span class="o">:=</span>gcc  <span class="c1">#编译器 </span>
</span></span><span class="line"><span class="cl"><span class="nf">main</span><span class="o">:</span>1.<span class="n">o</span> 2.<span class="n">o</span> 
</span></span><span class="line"><span class="cl">	gcc 1.o 2.o -o main
</span></span><span class="line"><span class="cl"><span class="nf">$(TARGET)</span><span class="o">:</span>1.<span class="n">o</span> 2.<span class="n">o</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> $^ -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">1.o</span><span class="o">:</span>1.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	gcc -c 1.c -o 1.o
</span></span><span class="line"><span class="cl"><span class="nf">1.o</span><span class="o">:</span>1.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">2.o</span><span class="o">:</span>2.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	gcc -c 2.c -o 2.o
</span></span><span class="line"><span class="cl"><span class="nf">2.o</span><span class="o">:</span>2.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">%.o</span><span class="o">:</span>%.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl"><span class="c">#%.o:%.c 同名.o:同名.c
</span></span></span><span class="line"><span class="cl"><span class="c">#并且生成的规则是一样的
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">上面的这个地方
</span></span><span class="line"><span class="cl">	$(TARGET):1.o 2.o
</span></span><span class="line"><span class="cl">	$(CC) $^ -o $@
</span></span><span class="line"><span class="cl">	需要指定2.o 2.o....
</span></span><span class="line"><span class="cl">		   main.o bmp.o touch.o gy39.o lcd.o ....
</span></span><span class="line"><span class="cl">	当你的工程多一个.c或者少一个.c。你需要手动修改Makefile中的规则，很麻烦？
</span></span><span class="line"><span class="cl">	有没有办法让make自动去某个目录下面搜索所有的.c文件呢？
</span></span><span class="line"><span class="cl">	有，通过make的内置函数来实现
</span></span></code></pre></div><h3 id="bmakefile的函数">b.Makefile的函数
</h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="err">Makefile允许使用并调用函数</span>
</span></span><span class="line"><span class="cl">	<span class="err">格式如下：</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>函数名 函数参数列表<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">Makefile运行调用shell命令或脚本</span> 
</span></span><span class="line"><span class="cl">	<span class="err">格式如下：</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span><span class="nv">shell</span>命令或脚本 参数<span class="k">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	rm *.o 
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="nf">wildcard</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	文件名展开函数，展开称为一列符合其参数描述的文件名，展开的文件名以空格隔开
</span></span><span class="line"><span class="cl">	1.c 2.c 3.c ...
</span></span><span class="line"><span class="cl">	wildcard只带一个参数，指定文件名的通配方式
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	CSRCS:<span class="o">=</span><span class="k">$(</span>wildcard *.c<span class="k">)</span><span class="c1">#展开所有当前目录下的.c文件名赋值给CSRCS</span>
</span></span><span class="line"><span class="cl">	<span class="nv">CSRCS</span><span class="o">+=</span><span class="k">$(</span>wildcard mp3/*.c<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">patsubst</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	模式字符串替换函数  
</span></span><span class="line"><span class="cl">	“子模式替换函数”
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>patsubst &lt;from&gt;,&lt;to&gt;,&lt;text&gt;<span class="k">)</span>
</span></span><span class="line"><span class="cl">	把原始字符&lt;text&gt;中的&lt;from&gt;替换成&lt;to&gt;
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>patsubst %.c,%.o,<span class="s2">&#34;1.c 2.c 3.c&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">===</span>&gt;<span class="s2">&#34;1.o 2.o 3.o&#34;</span>
</span></span></code></pre></div><h3 id="c万能版makefile">c.万能版Makefile
</h3><p>这是我自己的makefile，当个例子</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nv">TARGET</span><span class="o">:=</span> mp  
</span></span><span class="line"><span class="cl"><span class="c">#生成的可执行文件，即目标文件。
</span></span></span><span class="line"><span class="cl"><span class="c">#可以更改。
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">SOURCES</span><span class="o">:=</span>  
</span></span><span class="line"><span class="cl"><span class="c">#指定所有源文件 .c cpp。
</span></span></span><span class="line"><span class="cl"><span class="c">#不要更改！!!
</span></span></span><span class="line"><span class="cl"><span class="c">#不要将你的SOURCE的路径写进去，不然make clean命令会删掉你的SOURCE文件，找都找不回！！！
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">OBJS</span><span class="o">:=</span>  
</span></span><span class="line"><span class="cl"><span class="c">#指定所有的中间文件 .o 。
</span></span></span><span class="line"><span class="cl"><span class="c">#不用更改
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">CC</span><span class="o">:=</span>arm-linux-gcc 
</span></span><span class="line"><span class="cl"><span class="c">#指定编译器
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">INCS</span><span class="o">:=</span>-I  ./INCS
</span></span><span class="line"><span class="cl"><span class="c">#指定头文件的搜索路径
</span></span></span><span class="line"><span class="cl"><span class="c">#可以更改,&#34;./INCS&#34;是我自己的头文件存储的地方
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">LIBS</span><span class="o">:=</span>-L . 
</span></span><span class="line"><span class="cl"><span class="c">#指定库文件搜索文件  
</span></span></span><span class="line"><span class="cl"><span class="c">#不用更改
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">LIBNAME</span><span class="o">:=</span> -pthread 
</span></span><span class="line"><span class="cl"><span class="c">#指定库名字  -pthread 
</span></span></span><span class="line"><span class="cl"><span class="c">#可以更改
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">SOURCES</span><span class="o">+=</span><span class="k">$(</span>wildcard ./SOURCE/*.c<span class="k">)</span> 
</span></span><span class="line"><span class="cl"><span class="c">#展开当前目录下SOURCE中所有的.c文件 
</span></span></span><span class="line"><span class="cl"><span class="c">#把文件名赋值给#SOURCES
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nv">OBJS</span><span class="o">+=</span><span class="k">$(</span>patsubst %.c,%.o,<span class="k">$(</span>SOURCES<span class="k">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">$(TARGET)</span><span class="o">:</span><span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> $^ -o <span class="nv">$@</span> <span class="k">$(</span>INCS<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span> <span class="k">$(</span>LIBNAME<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="c">#指定可执行文件(目标文件)的编译规则
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nf">%.o</span><span class="o">:</span>%.<span class="n">c</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -c  $&lt; -o <span class="nv">$@</span> <span class="k">$(</span>INCS<span class="k">)</span> <span class="k">$(</span>LIBS<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="c">#制定中间文件的编译规则
</span></span></span><span class="line"><span class="cl"><span class="c"></span>
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	rm  -rf <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJS<span class="k">)</span> 
</span></span><span class="line"><span class="cl"><span class="c">#递归删除 删除文件夹下面的可执行文件和中间文件
</span></span></span></code></pre></div><p><strong>如果是第一次用makefile,建议先备份一份测试以下.</strong></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/default_tag/">Default_tag</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/2024%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/">
        
        

        <div class="article-details">
            <h2 class="article-title">2024年度总结</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/cpu%E9%99%90%E5%88%B6gpu%E6%80%A7%E8%83%BD/">
        
        

        <div class="article-details">
            <h2 class="article-title">CPU限制GPU性能</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/day10_gy39/">
        
        

        <div class="article-details">
            <h2 class="article-title">Day10_GY39</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/day12_dirent/">
        
        

        <div class="article-details">
            <h2 class="article-title">Day12_dirent</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/day13_%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/">
        
        

        <div class="article-details">
            <h2 class="article-title">Day13_双向链表</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 MySpace
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.31.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.85803ae902a250f7d5dbb4ba3bc919da7eb36f6b0fb381e657be5438a8a0b770.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>

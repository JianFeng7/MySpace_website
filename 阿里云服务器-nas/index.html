<!DOCTYPE html>
<html lang="zh-CN">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>阿里云服务器&#43;NAS - 空白Koobai</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="/suju/ios.json">
  <link rel="icon" href="https://img.koobai.com/koobai.png">
  <link href="/index.xml" title="空白Koobai" type="application/rss+xml">
  <link rel="canonical" href="http://localhost:1313/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8-nas/" />

  
  
  <link rel="stylesheet" href="/css/style.css">
  

  
    
    <meta property="og:title" content="阿里云服务器&#43;NAS"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://localhost:1313/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8-nas/"/>
    
    
  
</head>



<body class='page page-blog-single'>
  <div id="menu-main-mobile" class="menu-main-mobile">
    <ul class="menu">
        
        
            
                <li >
                    <a href="http://localhost:1313/">首页</a>
                </li>
            
        
            
                <li >
                    <a href="http://localhost:1313/posts/">博文</a>
                </li>
            
        
            
                <li >
                    <a href="https://sport.koobai.com/">骑行</a>
                </li>
            
        
            
                <li >
                    <a href="http://localhost:1313/apps/">软件</a>
                </li>
            
        
            
                <li >
                    <a href="http://localhost:1313/movies/">观影</a>
                </li>
            
        
            
                <li >
                    <a href="https://qiszy.taobao.com">好物</a>
                </li>
            
        
    </ul>
</div>
  <div id="wrapper" class="wrapper">
    <div class="header">

<div id="toggle-menu-main-mobile" class="hamburger-trigger">
  <button class="hamburger">Menu</button>
</div>
<div class="new-heard-menu">




<div class="header-menu">
  <a href="/" >首页</a>
</div>



<div class="header-menu">
  <a href="/posts/" >博文</a>
</div>



<div class="header-menu">
  <a href="https://sport.koobai.com/" >骑行</a>
</div>



<div class="header-menu">
  <a href="/apps/" >软件</a>
</div>



<div class="header-menu">
  <a href="/movies/" >观影</a>
</div>



<div class="header-menu">
  <a href="https://qiszy.taobao.com" target="_blank">好物</a>
</div>

</div>
  <div class="heard-right"> 
    <div class="about-koobai"><a href="/about/"><img src="https://img.koobai.com/koobai.webp" alt="koobai" title="我" data-umami-event="me"></a></div>
    <a href="https://github.com/koobai/blog" title="Github" target="_blank" class="githuab"><svg aria-hidden="true" viewBox="0 0 16 16" version="1.1" data-view-component="true" ><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path>
    </svg></a>    
    <a href="https://space.bilibili.com/2084095738" target="_blank" title="当UP主的一天"><svg width="20" height="20" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="zhuzhan-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.73252 2.67094C3.33229 2.28484 3.33229 1.64373 3.73252 1.25764C4.11291 0.890684 4.71552 0.890684 5.09591 1.25764L7.21723 3.30403C7.27749 3.36218 7.32869 3.4261 7.37081 3.49407H10.5789C10.6211 3.4261 10.6723 3.36218 10.7325 3.30403L12.8538 1.25764C13.2342 0.890684 13.8368 0.890684 14.2172 1.25764C14.6175 1.64373 14.6175 2.28484 14.2172 2.67094L13.364 3.49407H14C16.2091 3.49407 18 5.28493 18 7.49407V12.9996C18 15.2087 16.2091 16.9996 14 16.9996H4C1.79086 16.9996 0 15.2087 0 12.9996V7.49406C0 5.28492 1.79086 3.49407 4 3.49407H4.58579L3.73252 2.67094ZM4 5.42343C2.89543 5.42343 2 6.31886 2 7.42343V13.0702C2 14.1748 2.89543 15.0702 4 15.0702H14C15.1046 15.0702 16 14.1748 16 13.0702V7.42343C16 6.31886 15.1046 5.42343 14 5.42343H4ZM5 9.31747C5 8.76519 5.44772 8.31747 6 8.31747C6.55228 8.31747 7 8.76519 7 9.31747V10.2115C7 10.7638 6.55228 11.2115 6 11.2115C5.44772 11.2115 5 10.7638 5 10.2115V9.31747ZM12 8.31747C11.4477 8.31747 11 8.76519 11 9.31747V10.2115C11 10.7638 11.4477 11.2115 12 11.2115C12.5523 11.2115 13 10.7638 13 10.2115V9.31747C13 8.76519 12.5523 8.31747 12 8.31747Z"></path></svg></a>
</div>

</div>

<script src="/js/moment.min.js?v=2.29.4"></script>
<script src="/js/moment.twitter.min.js"></script>
<script>
function formatDate(param) {
if(typeof param === 'number') {
     param = new Date(param * 1000).toISOString();
  }
return moment(Date.parse(param)).twitterLong().replace(/\s\d{2}:\d{2}/, '');
}
</script>
     
<div class="single-nrong">
<div class="single-zw">
    <div class="article_details">
      <div class="article_details_title">阿里云服务器&#43;NAS</div>
      
    </div>
    <div class="content_zhengwen">
    <div class="content">
      <h1 id="什么是ecs">什么是ECS</h1>
<p>ECS：即Elastic Compute Service</p>
<p>弹性计算（Elastic Computing）是一种云计算服务模型，它旨在提供灵活、自动且可伸缩的计算资源。</p>
<blockquote>
<p>弹性计算的关键特性包括：</p>
<ol>
<li>
<p><strong>弹性伸缩：</strong> 用户可以根据实际需求自动调整计算资源的规模，实现按需分配和释放。这意味着在峰值时段增加资源，而在负载较低时减少资源，从而提高资源利用率。</p>
</li>
<li>
<p><strong>自动化管理：</strong> 弹性计算通常涉及自动化管理和部署，以减轻用户对基础设施的管理负担。自动化功能可以包括自动扩展、<em><strong>负载均衡</strong></em>和故障恢复等。</p>
<p>负载均衡（Load Balancing）是一种将工作负载平均分布到多个计算资源上的技术，旨在提高系统的性能、可靠性和可扩展性。通过分配和管理网络或应用程序流量，负载均衡确保每个计算资源都能有效地处理请求，避免某些资源过载而造成性能瓶颈。</p>
</li>
<li>
<p><strong>按使用付费：</strong> 用户只需支付实际使用的计算资源，而无需提前购买或维护硬件。这种按使用计费模型使成本更具可预测性和可控性。</p>
</li>
<li>
<p><strong>弹性网络：</strong> 除了计算资源外，弹性计算还可能涉及弹性网络，以确保在不同规模下的应用程序能够获得足够的网络资源支持。</p>
</li>
</ol></blockquote>
<p>域名</p>
<p>GiB，就是Gibibyte，即更准确的GB（2^30字节）</p>
<blockquote>
<p>可能因为GB现在很多情况都用于形容10^9了</p></blockquote>
<p><strong>Enterprise SSD (ESSD):</strong> 它通常指的是企业级固态硬盘。企业级固态硬盘是专为企业应用和数据中心设计的，具有更高的性能、可靠性和耐用性，以满足大规模数据存储和处理的需求。</p>
<p>快速部署时选择已有实例或手动部署LNMP环境时，已有ECS实例必须满足以下条件：</p>
<ul>
<li>实例已分配公网IP地址或绑定弹性公网IP（EIP）。</li>
<li>操作系统必须为CentOS 7.x。</li>
<li>实例安全组的入方向规则已放行22、80、443端口。具体操作，</li>
</ul>
<h1 id="部署lnmp环境centos-7">部署LNMP环境（CentOS 7）</h1>
<p>更新时间：2023-10-10 10:24:01</p>
<p>
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly93d3cuYWxpeXVuLmNvbS9wcm9kdWN0L2Vjcw%3d%3d"
    
     target="_blank"
>
产品详情</a></p>
<p>
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9kZXZlbG9wZXIuYWxpeXVuLmNvbS9ncm91cC9lY3Mv"
    
     target="_blank"
>
相关技术圈</a></p>
<p>
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vbXlfZmF2b3JpdGVzLmh0bWw%3d"
    
     target="_blank"
>
我的收藏</a></p>
<p>LNMP是目前主流的网站服务器架构之一，LNMP分别代表Linux、Nginx、MySQL和PHP。本文介绍如何在CentOS 7.x操作系统的ECS实例上搭建LNMP环境。</p>
<h2 id="背景信息">背景信息</h2>
<p>本文提供以下两种部署方式，您可以根据需要选择。</p>
<ul>
<li>
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyIzc4NjlmNzYwMDR0M3M%3d"
    
     target="_blank"
>
快速部署</a>：基于阿里云资源编排服务ROS（Resource Orchestration Service）实现，可以帮助您快速部署LNMP环境。与手动部署方式相比，快速部署可以自动完成所有资源的创建和配置，实现自动化快速部署。</li>
<li>
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyIzE0YjhlYjgwMDRzOW0%3d"
    
     target="_blank"
>
手动部署</a>：适用于熟悉Linux操作系统，并且对所安装软件的版本及各软件兼容性有所了解的用户。</li>
</ul>
<p><strong>说明</strong></p>
<p>您也可以在
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9tYXJrZXQuYWxpeXVuLmNvbS9zb2Z0d2FyZQ%3d%3d"
    
     target="_blank"
>
云市场</a>购买LNMP镜像直接创建ECS实例，以便快速建站。具体操作，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9yZXBsYWNlLXRoZS1taXJyb3ItbG5tcC1kZXBsb3ltZW50LWVudmlyb25tZW50"
    
     target="_blank"
>
更换镜像部署LNMP环境</a>。</p>
<p>本文的示例步骤中，使用的软件版本信息如下所述。当您使用不同软件版本时，需要根据实际情况自行调整命令和参数配置。</p>
<ul>
<li>Nginx版本：Nginx 1.20.1</li>
<li>MySQL版本：MySQL 5.7.42</li>
<li>PHP版本：PHP 7.0.33</li>
</ul>
<h2 id="准备工作">准备工作</h2>
<p>快速部署时选择已有实例或手动部署LNMP环境时，已有ECS实例必须满足以下条件：</p>
<ul>
<li>
<p>实例已分配公网IP地址或绑定弹性公网IP（EIP）。</p>
</li>
<li>
<p>操作系统必须为CentOS 7.x。</p>
</li>
<li>
<p>实例安全组的入方向规则已放行22、80、443端口。具体操作，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZXItZ3VpZGUvYWRkLWEtc2VjdXJpdHktZ3JvdXAtcnVsZSNjb25jZXB0LXNtNS0yd3oteGRi"
    
     target="_blank"
>
添加安全组规则</a>。</p>
<p><strong>重要</strong></p>
<p>基于服务器数据安全考虑，本文仅说明部署与测试LNMP环境所必需放行的端口，您可以根据实际需求，放行其他应用所需的端口号。例如，远程连接MySQL数据库时，需要放行MySQL默认占用的3306端口。</p>
</li>
</ul>
<p>点我去体验</p>
<h2 id="操作步骤"><strong>操作步骤</strong></h2>
<p>快速部署</p>
<p>手动部署</p>
<h3 id="步骤一关闭防火墙和selinux"><strong>步骤一：关闭防火墙和SELinux</strong></h3>
<p><strong>重要</strong></p>
<p>为避免因使用管理员权限不当造成不可预期的风险，建议您使用普通用户操作。如果普通用户没有sudo权限，具体操作，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyI3NlY3Rpb24tMGhvLW9tZi0wY3Q%3d"
    
     target="_blank"
>
如何为普通用户添加sudo权限</a>。</p>
<ol>
<li>
<p>远程连接需要部署LNMP环境的ECS实例。</p>
<p>具体操作，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZXItZ3VpZGUvY29ubmVjdGlvbi1tZXRob2RzI2NvbmNlcHQtdG1yLXBneC13ZGI%3d"
    
     target="_blank"
>
连接方式概述</a>。</p>
</li>
<li>
<p>关闭防火墙。</p>
<ol>
<li>
<p>运行以下命令，查看当前防火墙的状态。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">systemctl status firewalld
</span></span></code></pre></div><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5580348761/p32172.png" alt="查看防火墙状态" class="img-hide" loading="lazy" decoding="async" /></p>
<ul>
<li>如果防火墙的状态参数是 <code>inactive</code>，则防火墙为关闭状态，请执行步骤
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyI3N1YnN0ZXAtbXhlLTBtMS1ldW8%3d"
    
     target="_blank"
>
3</a>。</li>
<li>如果防火墙的状态参数是 <code>active</code>，则防火墙为开启状态，请执行步骤
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyI3N0ZXAtOXR4LTdjby1uZzQ%3d"
    
     target="_blank"
>
2.b</a>。</li>
</ul>
</li>
<li>
<p>关闭防火墙。</p>
<ul>
<li>
<p>临时关闭防火墙：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl stop firewalld
</span></span></code></pre></div><p><strong>说明</strong></p>
<p>临时关闭防火墙后，如果Linux实例重启，则防火墙将会自动开启。</p>
</li>
<li>
<p>永久关闭防火墙：</p>
<ol>
<li>
<p>关闭防火墙。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl stop firewalld
</span></span></code></pre></div></li>
<li>
<p>实例开机时，禁止启动防火墙服务。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl disable firewalld
</span></span></code></pre></div></li>
</ol>
<p><strong>说明</strong></p>
<p>如果您想重新开启防火墙，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9maXJld2FsbGQub3JnLw%3d%3d"
    
     target="_blank"
>
firewalld官网信息</a>。</p>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>关闭SELinux。</p>
<ol>
<li>
<p>运行以下命令，查看SELinux的当前状态。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">getenforce
</span></span></code></pre></div><ul>
<li>如果SELinux状态参数是 <code>Disabled</code>，则SELinux为关闭状态，请执行
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyI3NlY3Rpb24tZHJpLWYwci1pdmk%3d"
    
     target="_blank"
>
步骤二：安装Nginx</a>。</li>
<li>如果SELinux状态参数是 <code>Enforcing</code>，则SELinux为开启状态，请执行步骤
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyI3N1YnN0ZXAtbXhlLTBtMS1ldW8%3d"
    
     target="_blank"
>
3.b</a>。</li>
</ul>
</li>
<li>
<p>关闭SELinux。</p>
<p>SELinux关闭的方式分为临时关闭和永久关闭，请您根据自身业务需求进行选择。具体操作，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9lbmFibGUtb3ItZGlzYWJsZS1zZWxpbnV4I3Rhc2stMjM4NTA3NQ%3d%3d"
    
     target="_blank"
>
开启或关闭SELinux</a>。</p>
</li>
</ol>
</li>
</ol>
<h3 id="步骤二安装nginx"><strong>步骤二：安装Nginx</strong></h3>
<p><strong>说明</strong></p>
<p>本文只提供一个版本的Nginx作为示例，如果您需要安装其他版本的Nginx，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZS1jYXNlcy9tYW51YWxseS1idWlsZC1hbi1sbm1wLWVudmlyb25tZW50LW9uLWEtY2VudG9zLTctaW5zdGFuY2U%2fc3BtPWEyYzRnLjExMTg2NjIzLjAuaTEyI3NlY3Rpb24tMGhvLW9tZi0wY3Q%3d"
    
     target="_blank"
>
常见问题</a>。</p>
<ol>
<li>
<p>运行以下命令，安装Nginx。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum -y install nginx
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，查看Nginx版本。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx -v
</span></span></code></pre></div><p>返回结果类似如下所示，表示Nginx安装成功。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">nginx version: nginx/1.20.1
</span></span></code></pre></div></li>
</ol>
<h3 id="步骤三安装并配置mysql"><strong>步骤三：安装并配置MySQL</strong></h3>
<h4 id="安装mysql"><strong>安装MySQL</strong></h4>
<ol>
<li>
<p>运行以下命令，更新YUM源。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rpm -Uvh  http://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，安装MySQL。</p>
<p><strong>说明</strong></p>
<p>如果提示报错信息 <code>No match for argument</code>，您需要先运行命令<strong>sudo yum module disable mysql</strong>禁用默认的MySQL模块，再安装MySQL。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum -y install mysql-community-server --nogpgcheck
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，查看MySQL版本号。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mysql -V
</span></span></code></pre></div><p>返回结果如下所示，表示MySQL安装成功。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mysql  Ver 14.14 Distrib 5.7.42, <span class="k">for</span> Linux <span class="o">(</span>x86_64<span class="o">)</span> using  EditLine wrapper
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，启动MySQL。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start mysqld
</span></span></code></pre></div></li>
<li>
<p>依次运行以下命令，设置开机启动MySQL。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> mysqld
</span></span><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span></code></pre></div></li>
</ol>
<h4 id="配置mysql"><strong>配置MySQL</strong></h4>
<ol>
<li>
<p>运行以下命令，查看 <code>/var/log/mysqld.log</code>文件，获取并记录root用户的初始密码。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo grep <span class="s1">&#39;temporary password&#39;</span> /var/log/mysqld.log
</span></span></code></pre></div><p>命令行返回结果如下，其中 <code>ARQTRy3+****</code>为MySQL的初始密码。在下一步重置root用户密码时，会使用该初始密码。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">2021-11-10T07:01:26.595215Z <span class="m">1</span> <span class="o">[</span>Note<span class="o">]</span> A temporary password is generated <span class="k">for</span> root@localhost: ARQTRy3+****
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，配置MySQL的安全性。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo mysql_secure_installation
</span></span></code></pre></div><ol>
<li>
<p>输入MySQL的初始密码。</p>
<p><strong>说明</strong></p>
<p>在输入密码时，系统为了最大限度的保证数据安全，命令行将不做任何回显。您只需要输入正确的密码信息，然后按Enter键即可。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Securing the MySQL server deployment.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Enter password <span class="k">for</span> user root: <span class="c1">#输入上一步获取的root用户初始密码</span>
</span></span></code></pre></div></li>
<li>
<p>设置MySQL的新密码。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">The existing password <span class="k">for</span> the user account root has expired. Please <span class="nb">set</span> a new password.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">New password: <span class="c1">#输入新密码。长度为8至30个字符，必须同时包含大小写英文字母、数字和特殊符号。特殊符号包含()` ~!@#$%^&amp;*-+=|{}[]:;‘&lt;&gt;,.?/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Re-enter new password: <span class="c1">#确认新密码。</span>
</span></span><span class="line"><span class="cl">The <span class="s1">&#39;validate_password&#39;</span> plugin is installed on the server.
</span></span><span class="line"><span class="cl">The subsequent steps will run with the existing configuration
</span></span><span class="line"><span class="cl">of the plugin.
</span></span><span class="line"><span class="cl">Using existing password <span class="k">for</span> root.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Estimated strength of the password: <span class="m">100</span> <span class="c1">#返回结果包含您设置的密码强度。</span>
</span></span><span class="line"><span class="cl">Change the password <span class="k">for</span> root ? <span class="o">(</span>Press y<span class="p">|</span>Y <span class="k">for</span> Yes, any other key <span class="k">for</span> No<span class="o">)</span> :Y <span class="c1">#您需要输入Y以确认使用新密码。</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#新密码设置完成后，需要再次验证新密码。</span>
</span></span><span class="line"><span class="cl">New password:#再次输入新密码。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Re-enter new password:#再次确认新密码。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Estimated strength of the password: <span class="m">100</span>
</span></span><span class="line"><span class="cl">Do you wish to <span class="k">continue</span> with the password provided?<span class="o">(</span>Press y<span class="p">|</span>Y <span class="k">for</span> Yes, any other key <span class="k">for</span> No<span class="o">)</span> :Y <span class="c1">#您需要输入Y，再次确认使用新密码。</span>
</span></span></code></pre></div></li>
<li>
<p>输入Y删除匿名用户。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Remove anonymous users? <span class="o">(</span>Press y<span class="p">|</span>Y <span class="k">for</span> Yes, any other key <span class="k">for</span> No<span class="o">)</span> :Y
</span></span><span class="line"><span class="cl">Success.
</span></span></code></pre></div></li>
<li>
<p>输入Y禁止使用root用户远程登录MySQL。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Disallow root login remotely? <span class="o">(</span>Press y<span class="p">|</span>Y <span class="k">for</span> Yes, any other key <span class="k">for</span> No<span class="o">)</span> :Y
</span></span><span class="line"><span class="cl">Success.
</span></span></code></pre></div></li>
<li>
<p>输入Y删除test库以及用户对test库的访问权限。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Remove <span class="nb">test</span> database and access to it? <span class="o">(</span>Press y<span class="p">|</span>Y <span class="k">for</span> Yes, any other key <span class="k">for</span> No<span class="o">)</span> :Y
</span></span><span class="line"><span class="cl"> - Dropping <span class="nb">test</span> database...
</span></span><span class="line"><span class="cl">Success.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> - Removing privileges on <span class="nb">test</span> database...
</span></span><span class="line"><span class="cl">Success.
</span></span></code></pre></div></li>
<li>
<p>输入Y重新加载授权表。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Reload privilege tables now? <span class="o">(</span>Press y<span class="p">|</span>Y <span class="k">for</span> Yes, any other key <span class="k">for</span> No<span class="o">)</span> :Y
</span></span><span class="line"><span class="cl">Success.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">All <span class="k">done</span>!
</span></span></code></pre></div></li>
</ol>
</li>
</ol>
<p>更多信息，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9kZXYubXlzcWwuY29tL2RvYy9yZWZtYW4vNS43L2VuL215c3FsLXNlY3VyZS1pbnN0YWxsYXRpb24uaHRtbA%3d%3d"
    
     target="_blank"
>
MySQL文档</a>。</p>
<h3 id="步骤四安装并配置php"><strong>步骤四：安装并配置PHP</strong></h3>
<h4 id="安装php"><strong>安装PHP</strong></h4>
<ol>
<li>
<p>更新YUM源。</p>
<ol>
<li>
<p>运行以下命令，添加EPEL源。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>https://repo.ius.io/ius-release-el7.rpm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，添加Webtatic源。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
</span></span></code></pre></div></li>
</ol>
</li>
<li>
<p>运行以下命令，安装PHP。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum -y install php70w-devel php70w.x86_64 php70w-cli.x86_64 php70w-common.x86_64 php70w-gd.x86_64 php70w-ldap.x86_64 php70w-mbstring.x86_64 php70w-mcrypt.x86_64  php70w-pdo.x86_64   php70w-mysqlnd  php70w-fpm php70w-opcache php70w-pecl-redis php70w-pecl-mongodb
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，查看PHP版本。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">php -v
</span></span></code></pre></div><p>返回结果如下所示，表示安装成功。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">PHP 7.0.33 <span class="o">(</span>cli<span class="o">)</span> <span class="o">(</span>built: Dec  <span class="m">6</span> <span class="m">2018</span> 22:30:44<span class="o">)</span> <span class="o">(</span> NTS <span class="o">)</span>
</span></span><span class="line"><span class="cl">Copyright <span class="o">(</span>c<span class="o">)</span> 1997-2017 The PHP Group
</span></span><span class="line"><span class="cl">Zend Engine v3.0.0, Copyright <span class="o">(</span>c<span class="o">)</span> 1998-2017 Zend Technologies
</span></span><span class="line"><span class="cl">    with Zend OPcache v7.0.33, Copyright <span class="o">(</span>c<span class="o">)</span> 1999-2017, by Zend Technologies            
</span></span></code></pre></div></li>
</ol>
<h4 id="修改nginx配置文件以支持php"><strong>修改Nginx配置文件以支持PHP</strong></h4>
<ol>
<li>
<p>运行以下命令，备份Nginx配置文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak
</span></span></code></pre></div></li>
<li>
<p>修改Nginx配置文件，添加Nginx对PHP的支持。</p>
<p><strong>重要</strong></p>
<p>若不添加此配置信息，后续您使用浏览器访问PHP页面时，页面将无法显示。</p>
<ol>
<li>
<p>运行以下命令，打开Nginx配置文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo vim /etc/nginx/nginx.conf
</span></span></code></pre></div></li>
<li>
<p>按i进入编辑模式。</p>
</li>
<li>
<p>在 <code>server</code>大括号内，修改或添加下列配置信息。</p>
<p>除下面提及的需要添加或修改的配置信息外，其他配置保持默认值即可。</p>
<ul>
<li>
<p>添加或修改 <code>location /</code>配置信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">        location / <span class="o">{</span>
</span></span><span class="line"><span class="cl">            index index.php index.html index.htm<span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span></code></pre></div></li>
<li>
<p>添加或修改 <code>location ~ .php$</code>配置信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">        <span class="c1">#添加下列信息，配置Nginx通过fastcgi方式处理您的PHP请求。</span>
</span></span><span class="line"><span class="cl">        location ~ .php$ <span class="o">{</span>
</span></span><span class="line"><span class="cl">            root /usr/share/nginx/html<span class="p">;</span>    <span class="c1">#将/usr/share/nginx/html替换为您的网站根目录，本文使用/usr/share/nginx/html作为网站根目录。</span>
</span></span><span class="line"><span class="cl">            fastcgi_pass 127.0.0.1:9000<span class="p">;</span>   <span class="c1">#Nginx通过本机的9000端口将PHP请求转发给PHP-FPM进行处理。</span>
</span></span><span class="line"><span class="cl">            fastcgi_index index.php<span class="p">;</span>
</span></span><span class="line"><span class="cl">            fastcgi_param  SCRIPT_FILENAME  <span class="nv">$document_root$fastcgi_script_name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            include fastcgi_params<span class="p">;</span>   <span class="c1">#Nginx调用fastcgi接口处理PHP请求。</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span></code></pre></div></li>
</ul>
<p>添加或修改配置信息后，文件内容如下图所示：<img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1100356361/p350073.png" alt="nginx配置文件" class="img-hide" loading="lazy" decoding="async" /></p>
</li>
<li>
<p>按 <code>Esc</code>键，输入 <code>:wq</code>，按 <code>Enter</code>键关闭并保存配置文件。</p>
</li>
</ol>
</li>
<li>
<p>运行以下命令，启动Nginx服务。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start nginx 
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，设置Nginx服务开机自启动。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> nginx
</span></span></code></pre></div></li>
</ol>
<h4 id="配置php"><strong>配置PHP</strong></h4>
<ol>
<li>
<p>新建并编辑 <code>phpinfo.php</code>文件，用于展示PHP信息。</p>
<ol>
<li>
<p>运行以下命令，新建 <code>phpinfo.php</code>文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo vim &lt;网站根目录&gt;/phpinfo.php
</span></span></code></pre></div><p>*&lt;网站根目录&gt;*是您在 <code>nginx.conf</code>配置文件中 <code>location ~ .php$</code>大括号内，配置的 <code>root</code>参数值，如下图所示。<img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2100356361/p350096.png" alt="网站根目录" class="img-hide" loading="lazy" decoding="async" />本文配置的网站根目录为 <code>/usr/share/nginx/html</code>，因此需要运行以下命令新建 <code>phpinfo.php</code>文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo vim /usr/share/nginx/html/phpinfo.php
</span></span></code></pre></div></li>
<li>
<p>按i进入编辑模式。</p>
</li>
<li>
<p>输入下列内容，函数 <code>phpinfo()</code>会展示PHP的所有配置信息。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&lt;?php <span class="nb">echo</span> phpinfo<span class="o">()</span><span class="p">;</span> ?&gt;
</span></span></code></pre></div></li>
<li>
<p>按Esc键后，输入:wq并回车，保存关闭配置文件。</p>
</li>
</ol>
</li>
<li>
<p>运行以下命令，启动PHP-FPM。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start php-fpm
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，设置PHP-FPM开机自启动。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> php-fpm
</span></span></code></pre></div></li>
</ol>
<h3 id="步骤五测试访问lnmp配置信息页面"><strong>步骤五：测试访问LNMP配置信息页面</strong></h3>
<ol>
<li>
<p>在本地Windows主机或其他具有公网访问能力的Windows主机中，打开浏览器。</p>
</li>
<li>
<p>在浏览器的地址栏输入 <code>http://&lt;ECS实例公网IP地址&gt;/phpinfo.php</code>进行访问。</p>
<p>访问结果如下图所示，表示LNMP环境部署成功。</p>
<p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2100356361/p350106.png" alt="php结果" class="img-hide" loading="lazy" decoding="async" /></p>
</li>
</ol>
<h2 id="后续步骤">后续步骤</h2>
<p>测试访问LNMP配置信息页面后，建议您运行以下命令将 <code>phpinfo.php</code>文件删除，消除数据泄露风险。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm -rf &lt;网站根目录&gt;/phpinfo.php
</span></span></code></pre></div><p>其中，*&lt;网站根目录&gt;*需要替换为您在 <code>nginx.conf</code>中配置的网站根目录。</p>
<p>本文配置的网站根目录为 <code>/usr/share/nginx/html</code>，因此需要运行以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo rm -rf /usr/share/nginx/html/phpinfo.php
</span></span></code></pre></div><h2 id="常见问题">常见问题</h2>
<h3 id="问题一如何使用其他版本的nginx服务器">问题一：如何使用其他版本的Nginx服务器？</h3>
<ol>
<li>
<p>使用浏览器访问
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9uZ2lueC5vcmcvZW4vZG93bmxvYWQuaHRtbA%3d%3d"
    
     target="_blank"
>
Nginx开源社区</a>获取对应的Nginx版本的下载链接。</p>
<p>请根据您的个人需求，选择对应的Nginx版本。本章节以Nginx 1.8.1为例。</p>
</li>
<li>
<p>远程连接需要部署LNMP环境的ECS实例。</p>
<p>具体操作，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZXItZ3VpZGUvbG9nLW9uLXRvLWFuLWluc3RhbmNlLWJ5LXVzaW5nLXZuYyNjb25jZXB0LXNkay0xangtd2Ri"
    
     target="_blank"
>
使用VNC登录实例</a>。</p>
</li>
<li>
<p>运行以下命令，安装Nginx相关依赖。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum install -y gcc-c++
</span></span><span class="line"><span class="cl">sudo yum install -y pcre pcre-devel
</span></span><span class="line"><span class="cl">sudo yum install -y zlib zlib-devel
</span></span><span class="line"><span class="cl">sudo yum install -y openssl openssl-devel
</span></span></code></pre></div></li>
<li>
<p>运行 <code>wget</code>命令下载Nginx 1.8.1。</p>
<p>您可以通过Nginx开源社区直接获取对应版本的安装包URL，然后通过 <code>wget URL</code>的方式将Nginx安装包下载至ECS实例。例如，Nginx 1.8.1的下载命令如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo wget http://nginx.org/download/nginx-1.8.1.tar.gz
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，解压Nginx 1.8.1安装包，然后进入Nginx所在的文件夹。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo tar zxvf nginx-1.8.1.tar.gz
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> nginx-1.8.1
</span></span></code></pre></div></li>
<li>
<p>依次运行以下命令，编译源码。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo ./configure <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --user<span class="o">=</span>nobody <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --group<span class="o">=</span>nobody <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --prefix<span class="o">=</span>/usr/local/nginx <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --with-http_stub_status_module <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --with-http_gzip_static_module <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --with-http_realip_module <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --with-http_sub_module <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span> --with-http_ssl_module
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo make <span class="o">&amp;&amp;</span> make install
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，进入Nginx的 <code>sbin</code>目录，然后启动Nginx。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> /usr/local/nginx/sbin/
</span></span><span class="line"><span class="cl">sudo ./nginx
</span></span></code></pre></div></li>
<li>
<p>在本地主机中，使用浏览器访问 <code>ECS实例公网IP</code>。</p>
<p>出现如下图所示的页面，表示Nginx已成功安装并启动。<img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7825911161/p228426.png" alt="nginx" class="img-hide" loading="lazy" decoding="async" /></p>
</li>
</ol>
<h3 id="问题二如何为普通用户添加sudo权限">问题二：如何为普通用户添加sudo权限？</h3>
<ol>
<li>
<p>使用 <code>root</code>用户远程连接Linux服务器。</p>
<p>具体操作，请参见
<a 
    
        href="/tiaozhuan?target=aHR0cHM6Ly9oZWxwLmFsaXl1bi5jb20vemgvZWNzL3VzZXItZ3VpZGUvbG9nLW9uLXRvLWFuLWluc3RhbmNlLWJ5LXVzaW5nLXZuYyNjb25jZXB0LXNkay0xangtd2Ri"
    
     target="_blank"
>
使用VNC登录实例</a>。</p>
</li>
<li>
<p>运行以下命令，新建一个普通用户 <code>test</code>并设置密码。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">useradd <span class="nb">test</span>
</span></span><span class="line"><span class="cl">passwd <span class="nb">test</span>
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，为 <code>/etc/sudoers</code>文件赋权限。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">chmod <span class="m">750</span> /etc/sudoers
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，编辑 <code>/etc/sudoers</code>文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim /etc/sudoers
</span></span></code></pre></div><p>按i键进入编辑模式并添加以下配置：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">test</span> <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span>  NOPASSWD: ALL
</span></span></code></pre></div><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3968248761/p578461.png" alt="sada45" class="img-hide" loading="lazy" decoding="async" />输入:wq，保存并退出文件。</p>
</li>
<li>
<p>运行以下命令，切换到 <code>test</code>用户。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">su - <span class="nb">test</span>
</span></span></code></pre></div></li>
<li>
<p>运行以下命令，测试 <code>sudo</code>权限。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo cat /etc/redhat-release
</span></span></code></pre></div><p>如果回显信息类似如下所示，表示 <code>sudo</code>权限已经添加成</p>
<p><img src="assets/%e9%98%bf%e9%87%8c%e4%ba%91%e6%9c%8d%e5%8a%a1%e5%99%a8&#43;NAS/1703654419823.png" alt="1703654419823" class="img-hide" loading="lazy" decoding="async" /></p>
<p><img src="assets/%e9%98%bf%e9%87%8c%e4%ba%91%e6%9c%8d%e5%8a%a1%e5%99%a8&#43;NAS/1703655470426.png" alt="1703655470426" class="img-hide" loading="lazy" decoding="async" /></p>
<p>域名解析</p>
<p>UPDATE wp_options SET option_value = &lsquo;http://实例公网IP&rsquo; WHERE option_name = &lsquo;home&rsquo; OR option_name = &lsquo;siteurl&rsquo;;</p>
<p>功。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>test@iZbp1dqulfhozse3jbp**** ~<span class="o">]</span>$ sudo cat /etc/redhat-release
</span></span><span class="line"><span class="cl">CentOS Linux release 7.9.2009 <span class="o">(</span>Core<span class="o">)</span>
</span></span></code></pre></div><p>使用瀏覽器前往http://[<strong>WordPress</strong> 網域名稱]/wp-admin (例： 
<a 
    
        href="/tiaozhuan?target=aHR0cDovL2Nvb2xleGFtcGxlLmNvbS93cC1hZG1pbg%3d%3d"
    
     target="_blank"
>
http://coolexample.com/wp-admin</a> )。 輸入您的使用者名稱或email 地址及密碼，然後點選「 <strong>登入</strong> 」</p>
</li>
</ol>
<p><img src="assets/%e9%98%bf%e9%87%8c%e4%ba%91%e6%9c%8d%e5%8a%a1%e5%99%a8&#43;NAS/1703662582927.png" alt="1703662582927" class="img-hide" loading="lazy" decoding="async" /></p>

    </div>
    <div class="single-biaoq">
 <div class="page-time">更新于 
  <script>
    document.write(formatDate( 1759488827 )); 
  </script>
 </div>
 <div class="single-tag">
     
          
     <div class="single-tag-c">#<a href="/tags/default_tag/">Default_tag</a></div>
          
          
 </div>
  </div> 
 </div>
 
 <div class="archives_nrong" >
  
    <div class="archives_one">
      <div>
        <div class="archive-title"><a href="/%E9%BE%99%E5%9C%BA%E6%82%9F%E9%81%93/">龙场悟道</a></div>
        <div class="archive-time">
          <script>
            document.write(formatDate( 1759488827 )); 
          </script>
        </div>
        </div>
        <div class="archive-img">
        <a href="/%E9%BE%99%E5%9C%BA%E6%82%9F%E9%81%93/"><img loading="lazy" decoding="async" src="/" /></a>          
        </div>
    </div>
  
  
    <div class="archives_one">
      <div>
        <div class="archive-title"><a href="/%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6-%E9%98%85%E8%AF%BB%E6%B3%A8%E8%A7%A3/">量子力学-阅读注解</a></div>
        <div class="archive-time">
          <script>
            document.write(formatDate( 1759488827 )); 
          </script>
        </div>
        </div>
        <div class="archive-img">
        <a href="/%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6-%E9%98%85%E8%AF%BB%E6%B3%A8%E8%A7%A3/"><img loading="lazy" decoding="async" src="/" /></a>          
        </div>
    </div>
  
</div>
      
      <div id="MoreComments" onclick="loadComments()">评论一下 ...</div>
      <div class="article-comments" id="articlecomments" style="display: none;"><link href="https://img.koobai.com/Artalk.css" rel="stylesheet">
<script src="https://img.koobai.com/Artalk.js"></script>


<div id="Comments"></div>

<script>
  Artalk.init({
    el:        '#Comments',
    pageKey:   'http:\/\/localhost:1313\/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8-nas\/',
    pageTitle: '阿里云服务器\u002bNAS',
    server:    'https:\/\/c.koobai.com',
    site:      'Koobai 空白生活',
    
  })
</script></div> 
</div>

<div>
    <div class="paragraph-dh">
     <nav id="TableOfContents">
  <ul>
    <li><a href="#背景信息">背景信息</a></li>
    <li><a href="#准备工作">准备工作</a></li>
    <li><a href="#操作步骤"><strong>操作步骤</strong></a>
      <ul>
        <li><a href="#步骤一关闭防火墙和selinux"><strong>步骤一：关闭防火墙和SELinux</strong></a></li>
        <li><a href="#步骤二安装nginx"><strong>步骤二：安装Nginx</strong></a></li>
        <li><a href="#步骤三安装并配置mysql"><strong>步骤三：安装并配置MySQL</strong></a></li>
        <li><a href="#步骤四安装并配置php"><strong>步骤四：安装并配置PHP</strong></a></li>
        <li><a href="#步骤五测试访问lnmp配置信息页面"><strong>步骤五：测试访问LNMP配置信息页面</strong></a></li>
      </ul>
    </li>
    <li><a href="#后续步骤">后续步骤</a></li>
    <li><a href="#常见问题">常见问题</a>
      <ul>
        <li><a href="#问题一如何使用其他版本的nginx服务器">问题一：如何使用其他版本的Nginx服务器？</a></li>
        <li><a href="#问题二如何为普通用户添加sudo权限">问题二：如何为普通用户添加sudo权限？</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

</div>
<script src="/js/single.js"></script>    

  </div>
  <div class="footer-background">
<div class="footer">
        <div class="footer-info">&copy; 2025 <a href="/">空白Koobai</a>. 
        由 <a href="https://gohugo.io/" target="_blank"> Hugo </a> 提供强力驱动,<span class="youpaiyun"><a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank">又拍云</a>提供存储/加速</span>. 
        <a href="https://beian.miit.gov.cn/" target="_blank">浙ICP备16011784号-1</a> <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011302000343">浙公网安备 33011302000343 号</a>
      </div>
      <div class="footer-rss">
      <a href="https://memos.koobai.com/u/1/rss.xml" target="_blank">唠叨 RSS</a> / 
      <a href="https://koobai.com/index.xml" target="_blank">博文 RSS</a>
      </div>
    </div>
  </div>
 
 <script src="/js/view-image.min.js"></script>
  
<div class="gotop_hide">
  <div class="gotop" onclick="smoothScrollTop()" id="gotop"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="m1875 1037l-787-787v1798H960V250l-787 787l-90-90L1024 6l941 941z"/></svg></div>
</div>
  

  

  
  <script type="text/javascript" src="/js/bundle.js"></script>
  

  
   
</body>
</html>